#include "LogisimROM.h"


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CLogisimROM::Init(SInt2 sPosition)
{
	CLogisimMemory::Init(sPosition);
	mpvMemory = NULL;
	muiSize = 0;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CLogisimROM::Kill(void)
{
	CLogisimMemory::Kill();
	SafeFree(mpvMemory);
	muiSize = 0;
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
void CLogisimROM::SetAddressWidth(int iAddressWidth)
{
	CLogisimMemory::SetAddressWidth(iAddressWidth);

	SafeFree(mpvMemory);

	muiSize = 1 << iAddressWidth;
	mpvMemory = (uint32*)malloc(muiSize * sizeof(uint32));
	memset(mpvMemory, 0, muiSize * sizeof(uint32));
}


//////////////////////////////////////////////////////////////////////////
//
//
//////////////////////////////////////////////////////////////////////////
uint32* CLogisimROM::GetMemory(void)
{
	return mpvMemory;
}

